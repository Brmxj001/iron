<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Responsive Admin Dashboard Template">
    <meta name="keywords" content="admin,dashboard">
    <meta name="author" content="stacks">
    <!-- The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>Iron Back Product</title>

    <!-- Styles -->
    <link
            href="https://fonts.googleapis.com/css?family=Lato:400,700,900&display=swap"
            rel="stylesheet">
    <link
            href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700&display=swap"
            rel="stylesheet">
    <link
            href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
            rel="stylesheet">
    <link th:href="@{/plugins/bootstrap/css/bootstrap.min.css}"
          href="../../assets/plugins/bootstrap/css/bootstrap.min.css"
          rel="stylesheet">
    <link th:href="@{/plugins/font-awesome/css/all.min.css}"
          href="../../assets/plugins/font-awesome/css/all.min.css"
          rel="stylesheet">
    <link th:href="@{/iron/css/iron.css}" rel="stylesheet">
    <link th:href="@{/iron/css/box.css}" rel="stylesheet">
    <link th:href="@{/iron/css/categories.css}" rel="stylesheet">
    <!-- Theme Styles -->
    <link th:href="@{/css/connect.min.css}"
          href="../../assets/css/connect.min.css" rel="stylesheet">
    <link th:href="@{/css/admin4.css}" href="../../assets/css/admin4.css"
          rel="stylesheet">
    <link th:href="@{/css/dark_theme.css}"
          href="../../assets/css/dark_theme.css" rel="stylesheet">
    <link th:href="@{/css/custom.css}" href="../../assets/css/custom.css"
          rel="stylesheet">
    <link th:href="@{/iron/css/categories.css}" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link th:href="@{/fileinput/fileinput.css}" rel="stylesheet"/>
    <script th:src="@{/fileinput/fileinput.js}"></script>
    <script th:src="@{/fileinput/zh.js}"></script>
    <script th:src="@{/plugins/jquery/jquery-3.4.1.min.js}"
            src="../../assets/plugins/jquery/jquery-3.4.1.min.js"></script>
    <script th:src="@{/plugins/bootstrap/popper.min.js}"
            src="../../assets/plugins/bootstrap/popper.min.js"></script>
    <script th:src="@{/plugins/bootstrap/js/bootstrap.min.js}"
            src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script th:src="@{/plugins/jquery-slimscroll/jquery.slimscroll.min.js}"
            src="../../assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <script th:src="@{/plugins/jquery-sparkline/jquery.sparkline.min.js}"
            src="../../assets/plugins/jquery-sparkline/jquery.sparkline.min.js"></script>
    <script th:src="@{/plugins/apexcharts/dist/apexcharts.min.js}"
            src="../../assets/plugins/apexcharts/dist/apexcharts.min.js"></script>
    <script th:src="@{/plugins/blockui/jquery.blockUI.js}"
            src="../../assets/plugins/blockui/jquery.blockUI.js"></script>
    <script th:src="@{/plugins/flot/jquery.flot.min.js}"
            src="../../assets/plugins/flot/jquery.flot.min.js"></script>
    <script th:src="@{/plugins/flot/jquery.flot.time.min.js}"
            src="../../assets/plugins/flot/jquery.flot.time.min.js"></script>
    <script th:src="@{/plugins/flot/jquery.flot.symbol.min.js}"
            src="../../assets/plugins/flot/jquery.flot.symbol.min.js"></script>
    <script th:src="@{/plugins/flot/jquery.flot.resize.min.js}"
            src="../../assets/plugins/flot/jquery.flot.resize.min.js"></script>
    <script th:src="@{/plugins/flot/jquery.flot.tooltip.min.js}"
            src="../../assets/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script th:src="@{/js/connect.min.js}"
            src="../../assets/js/connect.min.js"></script>
    <script th:src="@{/js/pages/dashboard.js}"
            src="../../assets/js/pages/dashboard.js"></script>
    <script src="../../assets/js/pages/mailbox.js"
            th:src="@{/js/pages/mailbox.js}"></script>

</head>
<body>

<div th:replace="back/include::modal" id="modal"></div>
<div class='loader'>
    <div class='spinner-grow text-primary' role='status'>
        <span class='sr-only'>Loading...</span>
    </div>
</div>
<div class="connect-container align-content-stretch d-flex flex-wrap">
    <div th:replace="back/include::left" id="left"></div>
    <div class="page-container">
        <div class="page-content">
            <div class="main-wrapper">
                <div class="row">
                    <div class="col-lg-9">
                        <div class="card">
                            <div class="card-body">
                                <div class="inbox-options">
                                    <div class="inbox-page-count">联系方式</div>
                                </div>
                                <table class="table table table-hover">
                                    <thead class="success">
                                    <th>ID</th>
                                    <th>属性</th>
                                    <th>其他</th>
                                    </thead>
                                    <tbody>

                                    <tr>
                                        <td>首页轮播图</td>
                                        <td width="60%">
                                            <div id="ImgBox" style="width: 100%"></div>
                                        </td>
                                        <td>
                                            <span id="BoxButton">点击添加</span>
                                            <input style="display: none" type="file" name="file" id="BoxInput"
                                                   accept="image/*"/>
                                            <div id="info"></div>
                                        </td>
                                    </tr>
                                    <div th:replace="back/CommonInclude::common"></div>
                                    <div th:replace="back/CommonInclude::url"></div>
                                    <script type="text/javascript" th:inline="javascript">
                                        function showHomeImg() {
                                            let imgList= postRequest(getHomeCarousel())
                                            let box = $("#ImgBox")
                                            box.html("")
                                            for (let i = 0; i < imgList.length; i++) {
                                                let oldBox = box.html();
                                                box.html(oldBox + '<div><img src="' + [[${qiniu}]] + imgList[i].path + '" alt=""/><span id="' + imgList[i].id + '">+</span></div>');
                                            }
                                        }

                                        $(function () {
                                            $("#BoxButton").click(function () {
                                                $("#BoxInput").trigger("click")
                                                $("#info").html("上传中...")
                                            })

                                            $("#ImgBox").on("click", "span", function () {
                                                postRequest(deleteCarousel(),getFormData("id",$(this).attr("id")))
                                                showHomeImg()
                                            })

                                            $("#BoxInput").change(function () {
                                                postRequest(addHomeCarousel(),getFormData("file",$(this)[0].files[0]))
                                                showHomeImg()
                                                $(this).html("")
                                                $("#info").html("上传成功")
                                                setInterval(removeInfo,3000)
                                            })

                                            $("#ImgBox").on("click", "img", function () {
                                                showImg($(this).attr("src"))
                                            })

                                            showHomeImg()

                                            function removeInfo(){
                                                $("#info").html("")
                                            }
                                        })

                                    </script>


                                    </tbody>
                                </table>


                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-footer">
            <div class="row">
                <div class="col-md-12">
                    <span class="footer-text">2020 <a href="/iron/front/index">首页</a></span>
                </div>
            </div>
        </div>


    </div>
</div>

<div class="mailbox-compose-overlay"></div>
<div class="mailbox-item-overlay"></div>

<div th:replace="back/include::showImgModal" id="showImgModal"></div>
<div th:replace="back/include::ironJS" id="ironJS"></div>
<a class="hidden" href="/iron/back/products" id="productFresh"><span></span></a>

</body>
</html>